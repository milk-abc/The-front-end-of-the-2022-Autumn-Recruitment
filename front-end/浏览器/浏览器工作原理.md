![js核心系列流程图.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73095811d8d241e8abe4f004e0e09eef~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

##### 1.js为什么是单线程

作为浏览器脚本语言，js的主要用途是与用户互动，以及操作DOM，这决定了它只能是单线程，否则会带来很复杂的同步问题。比如JS同时有两个线程，一个线程在DOM节点上新增内容，另一个线程删除了这个节点，这时浏览器应该以哪个线程为准？

为了利用多核CPU的计算能力，HTML5提出Web Worker标准，允许js脚本创建多个线程，但子线程完全受主线程控制，且不得操作DOM。所以这个新标准并没有改变js单线程的本质。

##### 2.nodejs的event loop

![Node.js](https://www.ruanyifeng.com/blogimg/asset/2014/bg2014100803.png)

 (1)v8引擎解析js脚本

(2)解析后的代码，调用node api

(3)libuv库负责node api的执行。它将不同的任务分配给不同的线程，形成一个EventLoop，以异步的方式将任务的执行结果返回给v8引擎。

(4)v8引擎再将结果返回给用户。

##### 3.浏览器环境下的event loop

(1)所有同步任务都在主线程上执行，形成一个执行栈

(2)主线程之外，还存在一个“任务队列”。只要异步任务有了运行结果，就在任务队列中放置一个事件。

(3)一旦执行栈中的所有同步任务执行完毕，系统就会读取“任务队列”，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行。

##### 4.什么是v8引擎

是一种js引擎，一个执行js代码的程序或解释器，是以某种形式将js编译为字节码的编译器。

用户通过在地址栏输入一个URL、点击一个链接、提交表单或者其他的行为。

DNS查询

