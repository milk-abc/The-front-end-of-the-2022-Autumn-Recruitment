#### 强缓存

若有效，浏览器不会发起请求

响应头

##### Expires【缓存的过期时间，时间代表服务器的时间；如果本地时间小于Expires的时间，则在有效期内，浏览器会直接读取缓存】

##### 缺点：`Expires`受限于本地时间，如果本地时间修改，则可能会导致缓存失效。

##### 优先级大于

##### Cache-control【max-age 指定多少秒后缓存过期】

##### 状态码

```
200 OK (from disk cache)` 或者 `200 OK (from memory cache)
```

#### 协商缓存

当浏览器对某个资源的请求，没有命中强缓存，并在本地查找到缓存文件，则会发一个请求到服务器，验证本地缓存是否有效。

如果本地缓存文件有效，服务器响应请求，返回HTTP状态为304(Not Modified)。

如果本地缓存文件过期，服务器响应请求，返回HTTP状态为200，并携带资源实体数据。

响应头

##### Etag【`ETag`像文件的指纹一样，每次内容一更改，`ETag`值都会发生变化。当浏览器发起资源请求时，会将上一次文件的`ETag`值，放入`If-None-Match` 中，发送给服务端，询问该文件是否有更新。】

##### 优先级大于

##### Last-Modified【本地文件的最后修改日期，当浏览器发起资源请求时，会将文件的`Last-Modified`值，放入`If-Modified-Since` 中，发送给服务器，询问该文件在该日期后是否有更新】

缺点：

- 当本地编辑缓存文件时，缓存会失效。（虽然内容可能没改动）
- `If-Modified-Since`只能检测到秒级的修改，如果是1秒内修改了N次，则无法判断文件的有效性。
- **`If-Modified-Since` 只可以用在 `GET` 或 `HEAD`请求中**。

请求头

If-None-Match

If-Modified-Since

## 启发式缓存

在资源请求的响应头中没有出现`Expires`, `Cache-Control: max-age`, 或 `Cache-Control:s-maxage` 字段, 并且设置了`Last-Modified`, 那么浏览器默认会采用一个**启发式的算法**。

### 启发式缓存的算法

**取响应头的`Date值 - Last-Modified值`的结果的10%作为缓存时间。**